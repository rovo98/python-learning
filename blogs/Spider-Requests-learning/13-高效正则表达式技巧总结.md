### 高效的正则表达式技巧总结
[TOC]
##### 误匹配
- 指**正则表达式**所匹配的内容范围超过了所需要范围，有些文本命名不符合要求，但是被所写的正则表达式“击中”了。例如：如果使用\d{11}去匹配11位手机号，\d{11}不单单能匹配正确的手机号，它还会匹配98824839344这样明显不是手机号的**字符串**。我们把这样的匹配称为**误匹配**。
##### 漏匹配
- 指正则表达式所匹配的内容所规定的范围太狭窄，有些文本确实是所需要的，但是所写的正则表达式没有将这种情况囊括在内。例如：使用\d{18}来匹配身份证号码，就会漏掉结尾是字母X的情况。
  写出一条**正则表达式**，既可能出现**误匹配**(条件写得太宽松，范围大于目标文本)，也可能出现**漏匹配**(只描述了目标文本中多种情况的部分)，还可能既有**误匹配**又有**漏匹配**。例如：使用\w+\.com来匹配.com结尾的域名，既会误匹配abc\_.com(合法域名不包含\_,\w包含了这种情况),又会漏掉ab-c.com这样的域名(合法域名可以包含中划线，\w不包含中划线).

#### 应对方法
##### 掌握语法细节
- 正则表达式在各种语言中，其语法大致相同，细节各有千秋。明确所使用语言的正则的语法的细节，是写出正确、高效**正则表达式**的基础。例如，perl中与\w等效的匹配范围是[a-zA-Z0-9\_];perl正则表达式不支持肯定逆序视中使用可变的重复(variable repetition inside lookbehind,例如( ?<=.* )abc), 但是.Net语法是支持这一特性的；又如，JavaScript连逆序环视(lookbehind,如(?<=ab)c)都不支持，而Perl和Python是支持的。<<精通正则表达式>>第三章<<正则表达式的特性和流派概览>>明确地列出了个大派系的正则表达式的异同。

##### 先粗后精，先减后加
- 使用正则表达式语法对于目标文本进行描述和界定，可以像画素描一样，先大致勾勒出框架，在逐步在局部实现细节。仍举刚才的手机例子：先界定\d{11},总不会错；再细化为1[358]\d{9},就向前迈了一大步。先消除 **漏匹配**(刚开始先尽可能多的匹配，做加法)，然后再一点点去除**误匹配**(做减法)。
